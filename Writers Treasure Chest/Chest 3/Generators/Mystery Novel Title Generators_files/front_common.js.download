var trigger=false;$(document).ready(function(){if('undefined'!==typeof $.fn.popover){$.fn.popover.Constructor.prototype.recalculatePosition=function(){var $tip=this.tip();if($tip.is(':visible')){var placement=typeof this.options.placement=='function'?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement,autoToken=/\s?auto?\s?/i,autoPlace=autoToken.test(placement);if(autoPlace){placement=placement.replace(autoToken,'')||'top';}
$tip.addClass(placement);var pos=this.getPosition(),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;if(autoPlace){var orgPlacement=placement,viewportDim=this.getPosition(this.$viewport);placement=placement==='bottom'&&pos.bottom+actualHeight>viewportDim.bottom?'top':placement==='top'&&pos.top-actualHeight<viewportDim.top?'bottom':placement==='right'&&pos.right+actualWidth>viewportDim.width?'left':placement==='left'&&pos.left-actualWidth<viewportDim.left?'right':placement;$tip.removeClass(orgPlacement).addClass(placement);}
var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight);this.applyPlacement(calculatedOffset,placement);}};}
$('body').on('click',function(e){var $target=$(e.target).is('i')?$(e.target).parent():$(e.target);if($target.parents('.popover.in').length===0){if(typeof $target.data('bs.popover')!=='undefined'){$('.js_confirm_action_popover').not($target.data('bs.popover')['$element']).popover('hide');}else{$('.js_confirm_action_popover').popover('hide');trigger=false;}}});$(document).on('click','.js_confirm_action_popover',function(e){var $trigger=$(this),callback=$trigger.attr('data-callback-function');displayConfirmActionPopover($trigger,callback);});$(document).on('mouseenter','.js_confirm_action_popover',function(e){var $self=$(this),popoverData=$self.data('bs.popover');if('undefined'!==typeof popoverData){var $popover=popoverData.tip();if(null!==e.relatedTarget&&$popover.hasClass('in')&&trigger){$self.popover('hide');trigger=false;}}});$(document).on('click','.popover .js_popover_close',function(){var $self=$(this);$self.parents('.popover').popover('hide');trigger=false;});initConfirmActionPopovers();});$(window).load(function(){var leadModalTooltipShown=false,$headerElement=$('.js_header_element'),$leadLoginModalToggle=$('.js_profile_actions',$headerElement),$navbarToggle=$('.navbar-toggle',$headerElement);if('undefined'!==typeof window.jsVars&&'undefined'!==typeof window.jsVars['kartra_profile_icon_tooltip']){leadModalTooltipShown=parseInt(window.jsVars['kartra_profile_icon_tooltip'])!==0;}
if($headerElement.length&&$leadLoginModalToggle.length){if($navbarToggle.is(':visible')&&false===leadModalTooltipShown){var title=$('#lead_profile').length?'My Profile':'Login';$navbarToggle.tooltip({container:'body',viewport:{selector:'.js_header_element',padding:0},template:'<div class="tooltip tooltip_red tooltip_blink_anim" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:title,placement:'left'});setTimeout(function(){$navbarToggle.tooltip('show');leadModalTooltipShown=true;setTimeout(function(){$navbarToggle.tooltip('destroy');},5000);},1000);}else{if(false===leadModalTooltipShown&&$leadLoginModalToggle.length){setTimeout(function(){$leadLoginModalToggle.tooltip('show');leadModalTooltipShown=true;setTimeout(function(){$leadLoginModalToggle.tooltip('hide');},5000);},1000);}
$leadLoginModalToggle.on('inserted.bs.tooltip',function(e){var tooltip=$(e.target).data('bs.tooltip');if(leadModalTooltipShown){tooltip.$tip.removeClass('tooltip_red tooltip_blink_anim');}else{tooltip.$tip.addClass('tooltip_red tooltip_blink_anim');}});}}});function initConfirmActionPopovers($element){if('undefined'===typeof $element){$element=$('.js_confirm_action_popover');}
if($element.length){$element.each(function(){var $popover=$(this),contentSource=$popover.attr('data-content-source'),classes=$popover.attr('data-classes'),actionObject=$popover.attr('data-action-object'),popoverContainer=$popover.attr('data-popover-container');if('undefined'===typeof classes){classes='';}
if('undefined'===typeof popoverContainer){popoverContainer='';}
$popover.popover({placement:'top',template:'<div class="popover popover-black '+classes+'" role="tooltip"><div class="arrow"></div><div class="popover-content"></div></div>',html:'true',container:popoverContainer,trigger:'manual',content:function(){if($(contentSource).length){if('undefined'!==typeof actionObject){try{var object=$.parseJSON(actionObject);$.each(object,function(key,value){$(contentSource).find('.js_popover_action').attr('data-'+key,value);});}
catch(e){}}
return $(contentSource).html();}}});});}}
function displayConfirmActionPopover($trigger,callback){var $openPopovers=$('.popover.in');$('[data-toggle="tooltip"]').tooltip('hide');if($openPopovers.length===0||($openPopovers.length>0&&$($trigger).get(0)!==$openPopovers.data('bs.popover')['$element'].get(0))){$($trigger).popover('show');trigger=true;if('function'===typeof window[callback]){window[callback]($trigger,$openPopovers);}}}
function setBackgroundContrast($elementGetColor,$elementSetColor){var backgroundColor=$elementGetColor.css('background-color');if('transparent'===backgroundColor||'rgba(0, 0, 0, 0)'===backgroundColor){$elementSetColor.addClass('dark').removeClass('light');}else{var[r,g,b]=backgroundColor.match(/[\d\.]+/g),luminance=Math.round(((parseInt(r)*299)+(parseInt(g)*587)+(parseInt(b)*114))/1000);if(luminance>200){$elementSetColor.addClass('dark').removeClass('light');}else{$elementSetColor.addClass('light').removeClass('dark');}}}