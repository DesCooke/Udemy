var default_user_image='https://s3.amazonaws.com/kartra/internal/default_user.png';var generic_actions_for_goals=[{type:'attr',key:'title',value:'This element has been deleted'},{type:'tooltip',value:{template:'<div class="tooltip tooltip_red" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',container:'.tooltipster-bootstrapP_v4'}}];var generic_actions_for_email_templates=[{type:'tooltip',value:{template:'<div class="tooltip in_tooltipster" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',container:'.tooltipster-bootstrapP_v4'}}];var generic_parameters_for_goals_revenues={data:'',link:'/sales/tracking_links/ajax_get_main_stats_boxes/',extra:[{element:'.js_goals_deleted_entry',actions:generic_actions_for_goals}]};var generic_parameters_for_email_templates={data:'',link:'/members/account/email_templates/',extra:[{element:'.js_email_notifications_tooltip_member_image',actions:generic_actions_for_email_templates}]};$.ajaxPrefilter(function(options,originalOptions,jqXHR){var originalSuccess=options.success;var originalComplete=options.complete;var originalError=options.error;options.success=function(data,textStatus,sJqXHR){if(data=='sess expired'){data='';top.location='/login/?r='+encodeURIComponent(top.location);throw new Error("Session expired, please login!");}else if(data=='sess expired membership'){if(typeof membership_portal_path_url!=='undefined'){data='';top.location=membership_portal_path_url+'/?r='+encodeURIComponent(top.location);throw new Error("Session expired, please login!");}}else{if(originalSuccess!=null){originalSuccess(data,textStatus,sJqXHR);}}};options.complete=function(cJqXHR,textStatus){if(cJqXHR.responseText=='sess expired'){cJqXHR.responseText='';top.location='/login/?r='+encodeURIComponent(top.location);throw new Error("Session expired, please login!");}else if(cJqXHR.responseText=='sess expired membership'){if(typeof membership_portal_path_url!=='undefined'){cJqXHR.responseText='';top.location=membership_portal_path_url+'/?r='+encodeURIComponent(top.location);throw new Error("Session expired, please login!");}}else{if(originalComplete!=null){originalComplete(cJqXHR,textStatus);}}};options.error=function(eJqXHR,textStatus,errorThrown){if(eJqXHR.responseText=='sess expired'){top.location='/login/?r='+encodeURIComponent(top.location);throw new Error("Session expired, please login!");}else if(eJqXHR.responseText=='sess expired membership'){if(typeof membership_portal_path_url!=='undefined'){top.location=membership_portal_path_url+'/?r='+encodeURIComponent(top.location);throw new Error("Session expired, please login!");}}else{if(originalError!=null){originalError(eJqXHR,textStatus,errorThrown);}}};});window['kartra']='undefined'===typeof window['kartra']?[]:window['kartra'];window['kartra']['windowSize']='undefined'===typeof window['kartra']['windowSize']?[]:window['kartra']['windowSize'];window['kartra']['windowSize']['dataSize']=getDisplayableDataSize();var closeOpenPopovers=throttleCalls(function(){var $openPopovers=$('.popover.in');if($openPopovers.length){$openPopovers.each(function(){var $popover=$(this);if($popover.parent('body').length){$popover.removeClass('in');setTimeout(function(){$popover.css('display','');},350);}});}},250);$(document).ready(function(){var windowResizeEvent;$(window).on('resize',function(){clearTimeout(windowResizeEvent);windowResizeEvent=setTimeout(function(){var newDataSize=getDisplayableDataSize();if(window['kartra']['windowSize']['dataSize'][0]!==newDataSize[0]){window['kartra']['windowSize']['dataSize']=newDataSize;$('body').trigger('kartra:breakpoint',[newDataSize]);}},250);});if(jQuery().ezMark){$(".ezmark_tool_sidebar").ezMark();}
$(".js_textarea_wrapper textarea").on("focus",function(){$(this).parents(".js_textarea_wrapper").addClass("focus");}).on("blur",function(){$(this).parents(".js_textarea_wrapper").removeClass("focus");});$(document).on('click','.js_show_search',function(e){var $this=$(this),el=$this.parent().find('.js_search_popover');if(el.hasClass('in')){el.removeClass('in');el.on('webkitTransitionEnd oTransitionEnd MSTransitionEnd transitionend',function(e){el.hide();el.off('webkitTransitionEnd oTransitionEnd MSTransitionEnd transitionend');});}else{el.show();setTimeout(function(){el.addClass('in');$('.js_search_popover .dropdown-toggle:not(.btn-default)').dropdown();},0);}
e.stopPropagation();});$(document).on('change','.js_search_popover .selectpicker',function(){$('.js_search_popover .bootstrap-select.search_select').removeClass('open');});$(document).on('click',function(e){var container=$('.js_search_popover');if(container.hasClass('in')){if(!container.is(e.target)&&container.has(e.target).length===0){container.removeClass('in');container.on('webkitTransitionEnd oTransitionEnd MSTransitionEnd transitionend',function(e){container.hide();container.off('webkitTransitionEnd oTransitionEnd MSTransitionEnd transitionend');});}}});$(document).on('click','#toggle_view a:not(.js_ignore_delay)',function(e){e.preventDefault();var $self=$(this);if($self.attr('disabled')){e.stopImmediatePropagation();return false;}
disable_submit_button($('#toggle_view a'));$('.js_search_popover').removeClass('in').hide();$self.tab('show');});$('[data-toggle="tooltip_red"]').tooltip({template:'<div class="tooltip tooltip_red" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'});$(document).on('click','.js_sideblock_collapsable .js_handle',function(){var $handle=$(this),$sideblock=$handle.parents('.js_sideblock_collapsable:first');if($sideblock.hasClass('open')){$sideblock.removeClass('open');$('.draggable_new',$sideblock).tooltip({placement:'right',container:'body'});}else{$sideblock.addClass('open');$('.draggable_new',$sideblock).tooltip('destroy');}});$(document).on('click',".cmn-toggle",function(){if($(this).is(':checked')){$(this).parents(".switcher").siblings('label.toggler_label:first').removeClass('selected');$(this).parents(".switcher").siblings('label.toggler_label:last').addClass('selected');}else{$(this).parents(".switcher").siblings('label.toggler_label:last').removeClass('selected');$(this).parents(".switcher").siblings('label.toggler_label:first').addClass('selected');}
$('.js_search_popover').removeClass('in').hide();$('.js_search_popover').off('webkitTransitionEnd oTransitionEnd MSTransitionEnd transitionend');});$(document).on('change',".cmn-toggle",function(){if($(this).is(':checked')&&$(this).attr('data-checked-callback')!="undefined"&&typeof window[$(this).attr('data-checked-callback')]!="undefined"){window[$(this).attr('data-checked-callback')]($(this));}
if(!$(this).is(':checked')&&$(this).attr('data-unchecked-callback')!="undefined"&&typeof window[$(this).attr('data-unchecked-callback')]!="undefined"){window[$(this).attr('data-unchecked-callback')]($(this));}})
$(document).on('change','select.unsubseq_step',function(){$(this).parent().find('button:first').removeAttr('title');});$(document).on('click','.sorter',function(){if($(this).attr('call_function')){var ordering='asc';if($(this).hasClass('selected')){if($(this).hasClass('ascending')){$(this).addClass('descending').removeClass('ascending');ordering='desc';}else{$(this).addClass('ascending').removeClass('descending');ordering='asc';}}else{$('.sorter').removeClass('selected');$(this).addClass('selected');ordering='asc';}
$(this).attr('sort_direction',ordering);eval($(this).attr('call_function'));}});$(".universal_alert_content").each(function(){set_universal_alert();});$(document).one("DOMSubtreeModified",function(){set_universal_alert();});$(document).ajaxComplete(function(event,xhr,settings){set_universal_alert();});$(document).on('click','button[type=button]',function(e){if(typeof window.clickLocked==='undefined'||!window.clickLocked){window.clickLocked=true;setTimeout(function(){window.clickLocked=false;},1000);}else{e.stopImmediatePropagation();}});$('body').on('kartra:breakpoint',function(){var $activeInfoboxes=$('.js_toggle_button_infobox.expanded');if($activeInfoboxes.length){$activeInfoboxes.each(function(i,el){var $infobox=$(el).parents('.universal_alert:first'),height=$infobox.find('.universal_alert_content').height();$infobox.animate({height:height},500);});}});$(document).on('click','.js_toggle_button_infobox',function(){that=$(this);if(that.attr('disabled')){return false;}
disable_submit_button(that);var no_show_text=that.parents(".universal_alert").find("a.no-show-text");if(that.hasClass("expanded")){that.fadeOut();that.parents(".universal_alert").find("a.no-show-text").fadeOut();that.parents(".universal_alert").animate({height:20},500);setTimeout('that.parents(".universal_alert_content").css("white-space", "nowrap")',500);setTimeout('that.parents(".universal_alert_content").css("height", "20px")',500);setTimeout('that.parents(".universal_alert_content").addClass("padding-right")',500);setTimeout('that.parents(".universal_alert").addClass("collapsed");',500);setTimeout(function(){no_show_text.add(that).tooltipster('destroy');},500);setTimeout('that.fadeIn().html("Read more").removeClass("expanded");',600);}else{no_show_text.hide();that.fadeOut();that.addClass("expanded");setTimeout('that.parents(".universal_alert_content").removeClass("padding-right")',200);setTimeout('that.parents(".universal_alert_content").css("white-space", "")',200);setTimeout('that.parents(".universal_alert_content").css("height", "")',200);setTimeout('var height = that.parents(".universal_alert_content").height()+35',250);setTimeout('that.parents(".universal_alert").animate({height: height}, 500)',250);setTimeout('that.parents(".universal_alert").removeClass("collapsed");',750);setTimeout('that.fadeIn().html("<i class=lineico-arrow-circle-up-6></i>Collapse");',850);setTimeout(function(){no_show_text.tooltipster({theme:'tooltipster-light',touchDevices:true,trigger:'hover',offsetY:-8});that.tooltipster({theme:'tooltipster-light',touchDevices:true,trigger:'hover',content:'Collapse',offsetY:-8})},850);setTimeout('that.parents(".universal_alert").find("a.no-show-text").fadeIn();',850);}});$(document).on('click','.js_transactions_actions',function(){var transactionsModal=$("#the-modal"),url=$(this).data('url');loadTransactionsModal(transactionsModal,url);});$(document).on('rendered.bs.select','.js_square_text_select',$.fn.selectpickerReplaceTitle);$.fn.modal.Constructor.prototype.enforceFocus=function(){var $modalElement=this.$element;$(document).on('focusin.modal',function(e){var $parent=$(e.target.parentNode);if($modalElement[0]!==e.target&&!$modalElement.has(e.target).length&&!$parent.hasClass('cke_dialog_ui_input_select')&&!$parent.hasClass('cke_dialog_ui_input_text')&&$parent.hasClass('cke_contents cke_reset')){$modalElement.focus()}})};if(typeof CKEDITOR!=='undefined'){CKEDITOR.on('dialogDefinition',function(ev){var dialogName=ev.data.name,dialogDefinition=ev.data.definition;if(dialogName==='link'){dialogDefinition.removeContents('upload');dialogDefinition.removeContents('advanced');}});}
$(document).on('keypress','.js_only_number',function(e){var charCode=(e.which)?e.which:e.keyCode;if(charCode>31&&(charCode<48||charCode>57)){return false;}});$('.scroll_content_wrapper, .modal').on('scroll',function(){closeOpenPopovers();});$(document).on('click','.bootstrap-select .dropdown-toggle',function(e){var $toggle=$(e.target),$dropdownWrapper=$toggle.parents('.bootstrap-select.open:first'),$contentWrapper=$('.js_wrap'),$dropdown,dropdownOffset,contentOffset;if($dropdownWrapper.length&&$contentWrapper.length){$dropdown=$dropdownWrapper.find('.dropdown-menu.open');if($dropdown.length){dropdownOffset=$dropdown.offset();contentOffset=$contentWrapper.offset();if(contentOffset.left>dropdownOffset.left){$dropdownWrapper.addClass('drop-right')}}}});$(document).on('click','.js_confirm_action_popover_vendor',function(){var $trigger=$(this);initConfirmActionPopovers($trigger);});$(document).on('mouseenter','.js_confirm_action_popover_vendor',function(){var $trigger=$(this);showConfirmActionTooltip($trigger);$trigger.tooltipster('show');});});$(window).on('load',function(){apply_custom_scrollbar();});$.fn.selectpickerReplaceTitle=function(){var title=$(this).find('option:selected').text();$(this).next().children().attr('title',title);};function applyAjaxLoadTooltip(element,type,maxWidth){element.tooltipster({theme:'tooltipster-bootstrapP_v4',touchDevices:true,trigger:'hover',contentAsHTML:true,interactive:true,minWidth:600,maxWidth:('undefined'!==typeof maxWidth)?maxWidth:'',updateAnimation:false,functionBefore:function(instance,helper){helper();instance.tooltipster('content',generateLoader('seq'));$.post(tooltip_parameters.link+type,tooltip_parameters.data,function(result){instance.tooltipster('content',result);if(tooltip_parameters.extra!==undefined){$.each(tooltip_parameters.extra,function(index,value){var elem=value.element;var actions=value.actions;$.each(actions,function(action_index,action_value){if(action_value.type=="attr"){$(elem).attr(action_value.key,action_value.value);}
if(action_value.type=="tooltip"){$(elem).tooltip(action_value.value);}});});}});}});}
function hideInfobox($trigger,$popover){tooltip_origin=$trigger;$popover.find('.js_popover_action').on('click',function(e){var $self=$(this),infoboxId=$self.attr('data-infobox_id');$.ajax({url:'/members/account/my_account/hide_infobox/'+infoboxId}).done(function(data){$trigger.tooltipster('hide');$trigger.parents('.universal_alert').attr('data-infobox-hidden',true).hide();});});}
function set_universal_alert(){$(".universal_alert_content").each(function(){var no_chars=$(this).attr('data-max-chars');var info_box_text_length=$(this).clone().children().remove().end().text().trim().length;if(info_box_text_length>no_chars&&!$(this).find("a.collapse-text").hasClass("expanded")&&no_chars>0){$(this).css("white-space","nowrap");$(this).css("max-height","");$(".collapse-text",this).show();$(".no-show-text",this).show();$(".collapse-text i",this).hide();$(this).css("height","20px");}});}
function show_infobox(id,text){$("#infobox_"+id).html(text+'<div class="clearfix"></div><a class="collapse-text" href="javascript:void(0);">Read More</a><div class="clearfix"></div>');}
function global_sort_function(list_class,url,extra_parameters_function){list_class="."+list_class;if('.show_more'){$('.show_more').parent().hide();}
$(list_class+' li:not(:first):not(li.no-record)').remove();$(list_class+' li.no-record').hide();$(list_class+' li:first').after('<li style="border-bottom: none">'+generateLoader()+'</li>');if($('.sorter.selected').length>0){var order_by=$('.sorter.selected').data('sort');var order_by_direction=$('.sorter.selected').attr('sort_direction');}else{var order_by='col0';var order_by_direction='desc';}
$.ajax({url:url+"/"+order_by+"/"+order_by_direction,data:(typeof window[extra_parameters_function]=="function"?window[extra_parameters_function]():{}),type:'POST'}).done(function(result){var result=JSON.parse(result);$(list_class+' li:not(:first):not(li.no-record)').remove();$(list_class+' li:first').after(result.html);if($(list_class+' li').size()<3){$(list_class+' li.no-record').show();}
$(list_class).show();if('.show_more'){if(!result.show_more){$('.show_more').parent().hide();}else{$('.show_more').parent().show();}}
$('[data-toggle="tooltip"]').tooltip();});}
function ucwords(str){return(str+'').replace(/^([a-z\u00E0-\u00FC])|\s+([a-z\u00E0-\u00FC])/g,function($1){return $1.toUpperCase();});}
function number_format(number,decimals,dec_point,thousands_sep){number=(number+'').replace(/[^0-9+\-Ee.]/g,'');var n=!isFinite(+number)?0:+number,prec=!isFinite(+decimals)?0:Math.abs(decimals),sep=(typeof thousands_sep==='undefined')?',':thousands_sep,dec=(typeof dec_point==='undefined')?'.':dec_point,s='',toFixedFix=function(n,prec){var k=Math.pow(10,prec);return ''+Math.round(n*k)/k;};s=(prec?toFixedFix(n,prec):''+Math.round(n)).split('.');if(s[0].length>3){s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,sep);}
if((s[1]||'').length<prec){s[1]=s[1]||'';s[1]+=new Array(prec-s[1].length+1).join('0');}
return s.join(dec);}
function check_name_validity(str){var charRegExp=/^[a-zA-Z0-9\s]+$/
if(str.search(charRegExp)!=0){return false;}else{return true;}}
check_name_validity_error_msg='Only letters, numbers and spaces allowed';$(document).on('click','.page_link',function(){$("#sel_txt").text(0);$("#select_all").prop('checked',false);$("#select_all").ezMark();});function verify_email_domain(email,callback){if(typeof window['request']==undefined){window['request']=null;}
if(window['request']!=null){window['request'].abort();}
window['request']=$.post("/ConfigureGateway/verify_email_domain",{email:email},function(data){callback(data);});}
function validate_email_form(email){var re=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return(re.test(email)==true?0:1);}
function validate_email(email){var re=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(email);}
function validate_url(url,with_http){if(with_http==1){var expression=/^(http)s?:\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;}else{var expression=/^(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;}
return expression.test(url);}
function validate_full_url(url){return /^(http?|https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(url);}
function validate_domain(domain){var re=new RegExp("^"+
"(?:"+
"(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)"+
"(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+
"(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))"+
"\\.?"+
")"+
"$","i");return re.test(domain);}
function validate_string(string,custom_regexp){var re=new RegExp(custom_regexp,"i");return re.test(string);}
function remove_error_messages(jquery_selector){$(".label-validation-fail",jquery_selector).hide()}
function universal_toggle(data_group,data_individual,extra_parameters,ignore_delay)
{var $radioButtons=$('.js_toggle_radio[data-group="'+data_group+'"]'),$radioButtonsLinks=$radioButtons.find('a'),$clickedRadio=$('.js_toggle_radio[data-group="'+data_group+'"][data-group_individual="'+data_individual+'"]'),$clickedRadioLink=$clickedRadio.find('a'),$tabsContainers=$('.js_'+data_group+'_details'),$showedTabContainer=$('.js_'+data_group+'_details[data-group_individual~="'+data_individual+'"]');if($clickedRadioLink.attr('disabled')){return false;}
if('undefined'===typeof ignore_delay||!ignore_delay){disable_submit_button($radioButtonsLinks,1000);}
$radioButtons.removeClass('selected');$clickedRadio.addClass('selected');if(typeof extra_parameters!=='undefined'){if(typeof extra_parameters.no_hide==='undefined'){$tabsContainers.hide();$showedTabContainer.fadeIn();}
$.each(extra_parameters,function(key,element){switch(key){case 'callback_function':if(typeof window[element]=='function'){window[element]($clickedRadio);}}});}else{$tabsContainers.hide();$showedTabContainer.fadeIn();}}
function validate_list_empty(main_elements)
{$(main_elements.selector).removeClass("error");$("[data-error_element_selector = '"+main_elements.selector+"']").hide();var error=false;$(main_elements.selector).each(function(){if($(this).is('#resource_link')){if(!validate_url($(this).val())){error=true;return false;}}else{if($(this).val().trim()==''){error=true;return false;}}});if(error==true){$(main_elements.button).addClass('disabled');$(main_elements.button).attr('disabled',true);}else{$(main_elements.button).removeClass('disabled');$(main_elements.button).attr('disabled',false);}
return!error;}
function disable_submit_button(button,wait){var disable=(typeof wait!=='undefined')?wait:3000;button.attr('disabled',true);setTimeout(function(){button.attr('disabled',false);},disable);}
function validate_list_click(element)
{var error=false;$(element.selector).removeClass("error");$("[data-error_element_selector = '"+element.selector+"']").hide();if(typeof window[element.validation_function]=='function'){if(!window[element.validation_function]($(element.selector).val())){error=true;}}else if($(element.selector).val()!=''){error=true;}
if(error==true){$("[data-error_element_selector = '"+element.selector+"']").show();$(element.selector).addClass("error");$(element.button).removeClass('disabled');$(element.button).attr('disabled',false);}
return!error;}
function validation_list_items(list_details){if($(list_details.element_selector).length==0){$(list_details.button_selector).addClass('disabled').attr("disabled",true);}else{$(list_details.button_selector).removeClass('disabled').attr("disabled",false);}}
function rgb2hex(rgb){rgb=rgb.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return(rgb&&rgb.length===4)?"#"+
("0"+parseInt(rgb[1],10).toString(16)).slice(-2)+
("0"+parseInt(rgb[2],10).toString(16)).slice(-2)+
("0"+parseInt(rgb[3],10).toString(16)).slice(-2):'';}
function rgba2hex(rgb){return{'hex':rgb2hex(rgb),'opacity':getColorValues(rgb).alpha};}
function hexToRGBA(hex,opacity){return 'rgba('+(hex=hex.replace('#','')).match(new RegExp('(.{'+hex.length/3+'})','g')).map(function(l){return parseInt(hex.length%2?l+l:l,16)}).concat(opacity||1).join(',')+')';}
function tryHexToRGBA(color){var isHex=/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(color);return isHex?hexToRGBA(color):color;}
function getColorValues(color){var values={red:null,green:null,blue:null,alpha:null};if(typeof color=='string'){if(color.indexOf('#')===0){color=color.substr(1)
if(color.length==3)
values={red:parseInt(color[0]+color[0],16),green:parseInt(color[1]+color[1],16),blue:parseInt(color[2]+color[2],16),alpha:1}
else
values={red:parseInt(color.substr(0,2),16),green:parseInt(color.substr(2,2),16),blue:parseInt(color.substr(4,2),16),alpha:1}}else if(color.indexOf('rgb(')===0){var pars=color.indexOf(',');values={red:parseInt(color.substr(4,pars)),green:parseInt(color.substr(pars+1,color.indexOf(',',pars))),blue:parseInt(color.substr(color.indexOf(',',pars+1)+1,color.indexOf(')'))),alpha:1}}else if(color.indexOf('rgba(')===0){var pars=color.indexOf(','),repars=color.indexOf(',',pars+1);values={red:parseInt(color.substr(5,pars)),green:parseInt(color.substr(pars+1,repars)),blue:parseInt(color.substr(color.indexOf(',',pars+1)+1,color.indexOf(',',repars))),alpha:parseFloat(color.substr(color.indexOf(',',repars+1)+1,color.indexOf(')')))}}else{var stdCol={acqua:'#0ff',teal:'#008080',blue:'#00f',navy:'#000080',yellow:'#ff0',olive:'#808000',lime:'#0f0',green:'#008000',fuchsia:'#f0f',purple:'#800080',red:'#f00',maroon:'#800000',white:'#fff',gray:'#808080',silver:'#c0c0c0',black:'#000'};if(stdCol[color]!=undefined)
values=getColorValues(stdCol[color]);}}
return values}
function validate_on_event(element,validation){if(element.length&&typeof validation=='function'){element.bind({copy:function(){element.trigger('keyup');},paste:function(){element.trigger('keyup');},cut:function(){element.trigger('keyup');},change:function(){validation();},keyup:function(){validation();},blur:function(){validation();}});}}
function custom_base64_encode(element){element=custom_base64_decode(element);return btoa(encodeURIComponent(element).replace(/%([0-9A-F]{2})/g,function toSolidBytes(match,p1){return String.fromCharCode('0x'+p1);}));}
function custom_base64_decode(element){try{return decodeURIComponent(atob(element).split('').map(function(c){return '%'+('00'+c.charCodeAt(0).toString(16)).slice(-2);}).join(''));}catch(error){return element;}}
function length_name_validation(max_length,input_class,button_class)
{if(input_class.val().trim().length>0&&input_class.val().length>max_length){input_class.addClass('error');input_class.siblings('.js_help_block_error').html("Maximum "+max_length+" characters").show();if(button_class!=''){button_class.attr('disabled',true);}
return true;}else if(input_class.val().trim().length===0){if(button_class!=''){button_class.attr('disabled',true);}else{input_class.addClass('error');input_class.siblings('.js_help_block_error').html("Required").show();}
return true;}else{return false;}}
function clear_input_on_click(input,submit_button)
{input.removeClass('error');input.siblings('.js_help_block_error').hide();if(submit_button){if(input.val().trim()===''){submit_button.attr('disabled',true);}else{submit_button.attr('disabled',false);}}}
function enable_disable_submit_button(input_array,submit_button)
{var disabled=false;$.each(input_array,function(key,element){if(element.val().trim()===''){disabled=true;}
if(disabled){submit_button.attr('disabled',true);}else{submit_button.attr('disabled',false);}});}
function add_disabled_class_to_submit_button(input_array,submit_button)
{var disabled=false;$.each(input_array,function(key,element){if(element.val().trim()===''){disabled=true;}
if(disabled){submit_button.addClass('disabled');}else{submit_button.removeClass('disabled');}});}
function apply_custom_scrollbar(element){if(jQuery().mCustomScrollbar){var $applyTo=$('.js_scroll_content');if(typeof element!=='undefined'){$applyTo=$(element);}
$.each($applyTo,function(i,e){$(e).mCustomScrollbar({theme:'dark-3',setLeft:0,contentTouchScroll:false,scrollInertia:500});});}}
function show_hide_onboarding_steps(show){if(show===1){$('.js_user_tools_sidebar').show();}else{$('.js_user_tools_sidebar').hide();}}
function isScriptAlreadyIncluded(src){var scripts=document.getElementsByTagName("script");for(var i=0;i<scripts.length;i++){if(scripts[i].getAttribute('src')==src)return true;}
return false;}
String.prototype.QueryStringToJSON=function(){href=decodeURI(this);qArr=href.split('&');stack={};for(var i in qArr){var equalIndex=qArr[i].indexOf('=');var nextIndex=equalIndex+1;var name=qArr[i].substr(0,equalIndex);var value=qArr[i].substr(nextIndex);value=isNaN(value)?value:(value==='')?'':parseFloat(value);if(name.match(/(.*?)\[(.*?)]/)){name=RegExp.$1;name2=RegExp.$2;if(name2){if(!(name in stack)){stack[name]={};}
stack[name][name2]=value;}else{if(!(name in stack)){stack[name]=[];}
stack[name].push(value);}}else{stack[name]=value;}}
return stack;}
function setFilterSession(section,data)
{var actionRoute='';switch(section){case 'calendar':actionRoute='/calendars/calendar/';break;case 'helpdesk':actionRoute='/helpdesk/';break;}
if(actionRoute.length>0){$.ajax({type:'POST',url:actionRoute+'setFilterSession',data:data});}}
function rfc3986EncodeURIComponent(string){return encodeURIComponent(string).replace(/[!'()*]/g,escape);}
function generateLoader(overlayType,extraClass,display){if(typeof overlayType==='undefined'||overlayType===''){overlayType='sta';}
if(typeof extraClass==='undefined'||extraClass===''){extraClass='';}
if(typeof display==='undefined'||display===''){display='block';}
var loaderTemplate=['<div class="overlay overlay_wrapper_'+overlayType+' '+extraClass+'" style="display: '+display+';">','<div class="overlay_inner ring-loader_new">','<div>','<i></i>','<i></i>','<i></i>','</div>','</div>','</div>'].join('');return $(loaderTemplate)[0].outerHTML;}
function universal_modal_toggle($modal,custom_texts)
{if(typeof custom_texts==='undefined'){custom_texts={header_text:'',button_text:''}}
if(typeof custom_texts.header_text==='undefined'||custom_texts.header_text===''){custom_texts.header_text='';}
if(typeof custom_texts.button_text==='undefined'||custom_texts.button_text===''){custom_texts.button_text='';}
$modal.find('.js_asset_modal_initial_loader').remove();$modal.find('.js_asset_modal_body:first').after(generateLoader('','js_asset_modal_initial_loader'));$modal.find('.js_asset_modal_body').hide();$modal.find('.js_asset_modal_header_text').html(custom_texts.header_text);$modal.find('.js_asset_modal_main_button').html(custom_texts.button_text).attr('disabled',true);$modal.modal('show');}
function getDisplayableDataSize(){var windowSize=typeof window.kartra.windowSize['getBreakpoint']!=='undefined'?window.kartra.windowSize.getBreakpoint():'small',chartSize,productListSize,helpdeskListSize;switch(windowSize){case 'medium':chartSize=18;productListSize=11;helpdeskListSize=5;break;case 'large':chartSize=24;productListSize=16;helpdeskListSize=6;break;default:chartSize=12;productListSize=7;helpdeskListSize=3;break;}
return[chartSize,productListSize,helpdeskListSize];}
function escapeHtmlChars(value)
{return value.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}
function throttleCalls(func,interval){var timeout;return function(){var context=this,args=arguments;var later=function(){timeout=false;};if(!timeout){func.apply(context,args);timeout=true;setTimeout(later,interval)}}}
function initConfirmActionPopovers($element){if($element.length){var contentSource=$element.attr('data-content-source'),actionObject=$element.attr('data-action-object'),callback=$element.attr('data-callback-function');if($element.hasClass('tooltipstered')){$element.tooltipster('destroy');}
$element.tooltipster({theme:'tooltipster-bootstrapP_v4',touchDevices:true,trigger:'click',minWidth:'250',maxWidth:'400',contentAsHTML:true,interactive:true,functionReady:function(origin,tooltip){tooltip_origin=origin;$('.js_popover_close',tooltip).on('click',function(){origin.tooltipster('hide');});if('function'===typeof window[callback]){window[callback](origin,tooltip);}},content:function(){if($(contentSource).length){if('undefined'!==typeof actionObject){try{var object=$.parseJSON(actionObject);$.each(object,function(key,value){$(contentSource).find('.js_popover_action').attr('data-'+key,value);});}
catch(e){}}
return $(contentSource).html();}}});$element.tooltipster('show');}}
function showConfirmActionTooltip($element){if($element.length&&$element.hasClass('tooltipstered')){var title=$element.attr('data-title');if('undefined'!==typeof title&&$element.tooltipster('content')!==title){$element.tooltipster('destroy');$element.tooltipster({theme:'tooltipster-light',touchDevices:true,trigger:'hover',contentAsHTML:true,interactive:true,offsetY:-8,content:title});}}}
function loadTransactionsModal(transactionsModal,url){transactionsModal.modal('show');transactionsModal.find('.order_details_body').hide();transactionsModal.find('.js_order_modal_header').hide();transactionsModal.find('.js_transaction_modal_tabs').hide();transactionsModal.find('.overlay').show();$('.js_download_invoice_button').attr('disabled',true);jQuery.get(url,function(data){setTimeout(function(){transactionsModal.find('.overlay').hide();transactionsModal.find('.modal-body .js_modal_body').html(data);transactionsModal.find('.order_details_body').show();transactionsModal.find('.js_order_modal_header').show();transactionsModal.find('.js_transaction_modal_tabs').show();var order_id=$('.js_invoice_order_id').html();var buyer_username=$('#lead_username').val();var download_link='/invoice/?order_id='+order_id+'&order_username='+buyer_username+'';$('.js_download_invoice_button').attr('disabled',false);$('.js_download_invoice_button').attr('href',download_link);},1000);});}